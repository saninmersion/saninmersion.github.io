<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>Crafting User-Friendly Laravel Command - Sandip Shrestha</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta data-n-head="ssr" name="msapplication-TileColor" content="#ffffff"><meta data-n-head="ssr" name="msapplication-TileImage" content="/favicons/mstile-144x144.png"><meta data-n-head="ssr" name="theme-color" content="#272343"><meta data-n-head="ssr" name="robots" content="index, follow"><meta data-n-head="ssr" name="googlebot" content="index, follow"><meta data-n-head="ssr" name="twitter:card" content="summary_large_image"><meta data-n-head="ssr" name="twitter:site" content="@san_inmersion"><meta data-n-head="ssr" property="og:type" content="profile"><meta data-n-head="ssr" property="og:updated_time" content="2020-05-16T14:22:43.560Z"><meta data-n-head="ssr" name="author" content="Sandip Shrestha"><meta data-n-head="ssr" name="description" property="og:description" content="Design your console commands for better user experience" data-hid="description"><meta data-n-head="ssr" property="og:title" content="Crafting User-Friendly Laravel Command"><meta data-n-head="ssr" property="og:image" content="/uploads/1_dJ0d_PRESk3Ak7_gKMRHxg.png"><meta data-n-head="ssr" name="twitter:description" content="Design your console commands for better user experience"><meta data-n-head="ssr" name="twitter:image" content="/uploads/1_dJ0d_PRESk3Ak7_gKMRHxg.png"><link data-n-head="ssr" rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16"><link data-n-head="ssr" rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32"><link data-n-head="ssr" rel="icon" type="image/png" href="/favicons/android-chrome-96x96.png" sizes="96x96"><link data-n-head="ssr" rel="icon" type="image/png" href="/favicons/android-chrome-192x192.png" sizes="192x192"><link data-n-head="ssr" rel="apple-touch-icon" href="/favicons/apple-touch-icon-57x57.png" sizes="57x57"><link data-n-head="ssr" rel="apple-touch-icon" href="/favicons/apple-touch-icon-60x60.png" sizes="60x60"><link data-n-head="ssr" rel="apple-touch-icon" href="/favicons/apple-touch-icon-72x72.png" sizes="72x72"><link data-n-head="ssr" rel="apple-touch-icon" href="/favicons/apple-touch-icon-76x76.png" sizes="76x76"><link data-n-head="ssr" rel="apple-touch-icon" href="/favicons/apple-touch-icon-114x114.png" sizes="114x114"><link data-n-head="ssr" rel="apple-touch-icon" href="/favicons/apple-touch-icon-120x120.png" sizes="120x120"><link data-n-head="ssr" rel="apple-touch-icon" href="/favicons/apple-touch-icon-144x144.png" sizes="144x144"><link data-n-head="ssr" rel="apple-touch-icon" href="/favicons/apple-touch-icon-152x152.png" sizes="152x152"><link data-n-head="ssr" rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicons/favicon.ico"><link data-n-head="ssr" rel="canonical" href="https://sandipshrestha.com.np/posts/crafting-user-friendly-laravel command"><link rel="preload" href="/_nuxt/3213b8a640c84a0f40dd.js" as="script"><link rel="preload" href="/_nuxt/ef795ee9faac29d34ba2.js" as="script"><link rel="preload" href="/_nuxt/286c9011147357c678b8.js" as="script"><link rel="preload" href="/_nuxt/b356b1a74ade292a0927.js" as="script"><link rel="preload" href="/_nuxt/c60fc827688ff7bac84d.js" as="script"><style data-vue-ssr-id="38dfa7e4:0 87aa1208:0 87aa1208:1 9b3ab808:0 3191d5ad:0 932a8f60:0 32638744:0">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}a{background-color:transparent}strong{font-weight:bolder}img{border-style:none}button,input,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}[hidden],template{display:none}h1,h2,h3,h4,h5,p{margin:0}button{background-color:transparent;background-image:none;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}ul{list-style:none;margin:0;padding:0}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,Arial,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e0e0e0}img{border-style:solid}textarea{resize:vertical}input::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:#a0aec0}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::-ms-input-placeholder,textarea::-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}h1,h2,h3,h4,h5{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,select,textarea{padding:0;line-height:inherit;color:inherit}img,svg{display:block;vertical-align:middle}img{max-width:100%;height:auto}.container{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px;padding-right:2rem;padding-left:2rem}}@media (min-width:1024px){.container{max-width:1024px;padding-right:4rem;padding-left:4rem}}@media (min-width:1280px){.container{max-width:1280px;padding-right:5rem;padding-left:5rem}}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.bg-transparent{background-color:transparent}.bg-black{--bg-opacity:1;background-color:#000;background-color:rgba(0,0,0,var(--bg-opacity))}.bg-white{--bg-opacity:1;background-color:#fffffe;background-color:rgba(255,255,254,var(--bg-opacity))}.bg-primary{--bg-opacity:1;background-color:#bae8e8;background-color:rgba(186,232,232,var(--bg-opacity))}.hover\:bg-gray-700:hover{--bg-opacity:1;background-color:#616161;background-color:rgba(97,97,97,var(--bg-opacity))}.hover\:bg-gray-900:hover{--bg-opacity:1;background-color:#212121;background-color:rgba(33,33,33,var(--bg-opacity))}.bg-center{background-position:50%}.bg-no-repeat{background-repeat:no-repeat}.bg-cover{background-size:cover}.border-black{--border-opacity:1;border-color:#000;border-color:rgba(0,0,0,var(--border-opacity))}.border-gray-900{--border-opacity:1;border-color:#212121;border-color:rgba(33,33,33,var(--border-opacity))}.rounded-full{border-radius:9999px}.border-0{border-width:0}.border-2{border-width:2px}.border-t{border-top-width:1px}.border-b{border-bottom-width:1px}.cursor-pointer{cursor:pointer}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.hidden{display:none}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.flex-shrink-0{flex-shrink:0}.float-right{float:right}.font-sans{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,Arial,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.font-normal{font-weight:400}.font-semibold{font-weight:600}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.h-1{height:.25rem}.h-8{height:2rem}.h-10{height:2.5rem}.h-auto{height:auto}.h-full{height:100%}.text-sm{font-size:.875rem}.text-4xl{font-size:2.25rem}.leading-relaxed{line-height:1.625}.leading-loose{line-height:2}.list-none{list-style-type:none}.m-0{margin:0}.my-0{margin-top:0;margin-bottom:0}.mx-1{margin-left:.25rem;margin-right:.25rem}.my-8{margin-top:2rem;margin-bottom:2rem}.mx-auto{margin-left:auto;margin-right:auto}.-mx-2{margin-left:-.5rem;margin-right:-.5rem}.-mx-4{margin-left:-1rem;margin-right:-1rem}.mb-0{margin-bottom:0}.mr-2{margin-right:.5rem}.mb-2{margin-bottom:.5rem}.mr-3{margin-right:.75rem}.mr-4{margin-right:1rem}.mb-4{margin-bottom:1rem}.mb-5{margin-bottom:1.25rem}.mb-6{margin-bottom:1.5rem}.mt-8{margin-top:2rem}.mb-8{margin-bottom:2rem}.mt-10{margin-top:2.5rem}.mb-10{margin-bottom:2.5rem}.mb-12{margin-bottom:3rem}.mb-16{margin-bottom:4rem}.mb-20{margin-bottom:5rem}.mb-24{margin-bottom:6rem}.max-w-sm{max-width:24rem}.max-w-xl{max-width:36rem}.max-w-2xl{max-width:42rem}.max-w-6xl{max-width:72rem}.object-cover{-o-object-fit:cover;object-fit:cover}.object-left-top{-o-object-position:left top;object-position:left top}.opacity-75{opacity:.75}.outline-none{outline:0}.overflow-hidden{overflow:hidden}.p-0{padding:0}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-8{padding:2rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-20{padding-top:5rem;padding-bottom:5rem}.pb-1{padding-bottom:.25rem}.pl-12{padding-left:3rem}.placeholder-black::-webkit-input-placeholder{--placeholder-opacity:1;color:#000;color:rgba(0,0,0,var(--placeholder-opacity))}.placeholder-black::-moz-placeholder{--placeholder-opacity:1;color:#000;color:rgba(0,0,0,var(--placeholder-opacity))}.placeholder-black:-ms-input-placeholder{--placeholder-opacity:1;color:#000;color:rgba(0,0,0,var(--placeholder-opacity))}.placeholder-black::-ms-input-placeholder{--placeholder-opacity:1;color:#000;color:rgba(0,0,0,var(--placeholder-opacity))}.placeholder-black::placeholder{--placeholder-opacity:1;color:#000;color:rgba(0,0,0,var(--placeholder-opacity))}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:-webkit-sticky;position:sticky}.top-0{top:0}.right-0{right:0}.bottom-0{bottom:0}.left-0{left:0}.resize-none{resize:none}.shadow-md{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.shadow-2xl{box-shadow:0 25px 50px -12px rgba(0,0,0,.25)}.text-left{text-align:left}.text-center{text-align:center}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-white{--text-opacity:1;color:#fffffe;color:rgba(255,255,254,var(--text-opacity))}.text-gray-600{--text-opacity:1;color:#757575;color:rgba(117,117,117,var(--text-opacity))}.text-gray-700{--text-opacity:1;color:#616161;color:rgba(97,97,97,var(--text-opacity))}.hover\:text-white:hover{--text-opacity:1;color:#fffffe;color:rgba(255,255,254,var(--text-opacity))}.hover\:text-secondary:hover{--text-opacity:1;color:#272343;color:rgba(39,35,67,var(--text-opacity))}.uppercase{text-transform:uppercase}.underline{text-decoration:underline}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.tracking-wide{letter-spacing:.025em}.tracking-wider{letter-spacing:.05em}.w-8{width:2rem}.w-10{width:2.5rem}.w-full{width:100%}.z-10{z-index:10}.z-20{z-index:20}.transform{--transform-translate-x:0;--transform-translate-y:0;--transform-rotate:0;--transform-skew-x:0;--transform-skew-y:0;--transform-scale-x:1;--transform-scale-y:1;transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y))}.transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-300{transition-duration:.3s}@media (min-width:768px){.md\:flex-row{flex-direction:row}.md\:flex-no-wrap{flex-wrap:nowrap}.md\:h-12{height:3rem}.md\:text-5xl{font-size:3rem}.md\:text-6xl{font-size:4rem}.md\:my-12{margin-top:3rem;margin-bottom:3rem}.md\:mb-8{margin-bottom:2rem}.md\:mb-24{margin-bottom:6rem}.md\:p-4{padding:1rem}.md\:pr-40{padding-right:10rem}.md\:w-12{width:3rem}.md\:w-1\/2{width:50%}.md\:w-1\/3{width:33.333333%}.md\:w-3\/4{width:75%}.md\:w-2\/5{width:40%}.md\:w-3\/5{width:60%}}html{font-size:100%}body{background-color:#fff;font-family:Sintony,sans-serif;font-weight:400;line-height:1.65;color:#333}p{margin-bottom:1.15rem}h1,h2,h3,h4,h5{margin:2.75rem 0 1.05rem;font-family:Source Sans Pro,sans-serif;font-weight:700;line-height:1.15}h1{font-size:3.052em}h2{font-size:2.441em}h3{font-size:1.953em}h4{font-size:1.563em}h5{font-size:1.25em}.markdown{--text-opacity:1;color:#212121;color:rgba(33,33,33,var(--text-opacity));line-height:1.5;word-wrap:break-word}.markdown>*+*{margin-top:0;margin-bottom:1rem}.markdown li+li{margin-top:.25rem}.markdown li>p+p{margin-top:1.5rem}.markdown a,.markdown strong{font-weight:600}.markdown a{--text-opacity:1;color:#3182ce;color:rgba(49,130,206,var(--text-opacity))}.markdown strong a{font-weight:700}.markdown img{margin-left:auto;margin-right:auto}.markdown h1{font-size:2.25rem}.markdown h1,.markdown h2{line-height:1.25;border-bottom-width:1px;font-weight:600;margin-bottom:1rem;margin-top:1.5rem;padding-bottom:.5rem}.markdown h2{font-size:1.5rem}.markdown h3{line-height:1.375;font-size:1.125rem}.markdown h3,.markdown h4{font-weight:600;margin-bottom:1rem;margin-top:1.5rem}.markdown h4{line-height:1;font-size:1rem}.markdown h5{line-height:1.25;font-size:.875rem;font-weight:600;margin-bottom:1rem;margin-top:1.5rem}.markdown ul{font-size:1rem;padding-left:2rem;list-style-type:disc}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#fff;z-index:999999}.main-container{transform:translateX(0);transition:transform .5s cubic-bezier(.07,.23,.34,1)}.main-container.drawer-open{transform:translateX(-200px)}.nuxt-link-exact-active[data-v-56552e09]{color:#fff;background:#000}.nav-drawer[data-v-56552e09]{transform:translateX(100%);transition:transform .5s cubic-bezier(.07,.23,.34,1)}.nav-drawer.open[data-v-56552e09]{transform:translateX(0)}.nav-drawer.open a[data-v-56552e09]{-webkit-animation:slide-in-data-v-56552e09 .4s .2s backwards;animation:slide-in-data-v-56552e09 .4s .2s backwards}.nav-drawer.open li:nth-of-type(2) a[data-v-56552e09]{-webkit-animation-delay:.3s;animation-delay:.3s}.nav-drawer.open li:nth-of-type(3) a[data-v-56552e09]{-webkit-animation-delay:.4s;animation-delay:.4s}.nav-drawer.open li:nth-of-type(4) a[data-v-56552e09]{-webkit-animation-delay:.5s;animation-delay:.5s}.nav-drawer.open li:nth-of-type(5) a[data-v-56552e09]{-webkit-animation-delay:.6s;animation-delay:.6s}@-webkit-keyframes slide-in-data-v-56552e09{0%{opacity:0;transform:translateX(80px)}to{opacity:1;transform:translateX(0)}}@keyframes slide-in-data-v-56552e09{0%{opacity:0;transform:translateX(80px)}to{opacity:1;transform:translateX(0)}}.close.icon[data-v-56552e09]{width:44px;height:44px;right:40px;top:40px}.close.icon[data-v-56552e09]:before{transform:rotate(-45deg)}.close.icon[data-v-56552e09]:after,.close.icon[data-v-56552e09]:before{content:"";position:absolute;top:10px;width:44px;height:4px;background-color:#000}.close.icon[data-v-56552e09]:after{transform:rotate(45deg)}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="w-full antialiased" style="background-color:#fffffe"><div class="relative main-container"><header class="bg-white left-0 sticky top-0 w-full z-10 mb-0 md:mb-8 shadow-md"><div class="container"><div class="mx-auto max-w-6xl"><nav class="flex items-center justify-between flex-wrap py-6"><a href="/"><div class="flex items-center flex-shrink-0 text-white"><h4 class="m-0 p-0 text-black">Sandip Shrestha</h4></div></a> <div class="flex items-center cursor-pointer"><span><img src="/_nuxt/img/c159867.svg" alt="Menu Toggle" class="w-10 h-10 mr-3"></span> <span class="text-black font-bold uppercase">Menu</span></div></nav></div></div></header> <div class="container"><div class="mx-auto max-w-6xl mb-16"><div><h1 class="text-4xl md:text-5xl">Crafting User-Friendly Laravel Command</h1> <p class="text-gray-700">Design your console commands for better user experience</p> <div class="flex items-center"><span class="block w-8 h-8 md:w-12 md:h-12 rounded-full border-2 overflow-hidden mr-2"><img src="/_nuxt/img/fb5252b.jpg" class="w-full h-full object-cover"></span> <div class="text-sm"><div><strong>Sandip Shrestha</strong></div> <div class="text-gray-700"><span>20 February, 2020</span> <span class="text-gray-600 font-bold mx-1"> | </span> <span>4 minutes read</span></div></div></div> <img src="/uploads/1_dJ0d_PRESk3Ak7_gKMRHxg.png" alt="Crafting User-Friendly Laravel Command" class="w-full object-cover object-left-top shadow-2xl my-0 md:my-12" style="max-height:500px"></div> <div class="markdown my-8 w-full md:w-3/4"><p>To create a new command, we can use the <code>make:command</code> Artisan command. This command will create a new command class in the <code>app/Console/Commands</code> directory.</p>
<pre><code>php artisan make:command DataCleaner
</code></pre>
<p>Let‚Äôs take a look at the example command to clean data on a website.</p>
<pre><code>class DataCleaner extends Command{
	protected $signature = 'data:clean { ‚Äî all} {website}';   
    protected $description = 'Clean Website Data';    
    
    public function __construct()   {     
    	parent::__construct();   
    }      
    
    public function handle(
   	  WebsiteRepository $websiteRepository, 
      CleanerService $cleanerService
    ){     
    	$website = $this->argument(‚Äòwebsite‚Äô);     
        $all = $this->option(‚Äòall‚Äô);          
        if ( $website ) {       
        	$websiteRepository->filterByFqdn($website);
        }
        
         $websites = $websiteRepository->all();
         $website->each(function ($site){       
         	$cleanerService->run($site->toArray());
            }   
         ); 
     }
}
</code></pre>
<blockquote>
<p>Note that we are able to inject any dependencies we need into the command‚Äôs handle method. We injected <code>WebsiteRepository</code> and <code>CleanerService</code> class in the handle method above.</p>
</blockquote>
<h3>Command Structure</h3>
<p>The <code>signature</code> and <code>description</code> properties of the class will be used when displaying your command on the list screen.</p>
<pre><code>protected $signature = ‚Äòdata:clean { ‚Äî all} {website}‚Äô;
</code></pre>
<p>The <code>signature</code> property allows you to define the name, arguments, and options for the command in a single, expressive, route-like syntax.</p>
<p>All user-supplied <code>arguments</code> and <code>options</code> are wrapped in curly braces. In the following example, the command defines one required argument: <code>website</code>.</p>
<p>You may also make arguments optional and define default values for arguments:</p>
<pre><code>data:clean {website?} // Optional argument‚Ä¶

data:clean {website?=sandipshrestha.com.np} // Optional argument with default value‚Ä¶
</code></pre>
<p><code>Options</code> are prefixed by two hyphens ( ‚Äî ) when they are specified on the command line. There are two types of options: those that receive a value and those that don‚Äôt. Options that don‚Äôt receive a value serve as a boolean ‚Äúswitch‚Äù. In the following example, the command defines one option: <code>all</code>.</p>
<p>The <code>handle</code> method will be called when your command is executed. We place our command logic in this method.</p>
<h3>Retrieving Input</h3>
<p>We can access the values for the arguments and options accepted by our command by using the argument and option methods:</p>
<pre><code>// retrieve the website argument value...
$website = $this->argument(‚Äòwebsite‚Äô);

// retrieve all of the arguments as an array...
$arguments = $this->arguments();

// Retrieve a specific option...
$all = $this->option('all');

// Retrieve all options...
$options = $this->options();
</code></pre>
<p>We can also ask the input value from users by using the following methods.</p>
<pre><code>// prompt the user with a question
$name = $this->ask('What the domain name of the website?');

// similar to ask, but the user's input will be hidden as they type
$password = $this->secret('What is the admin password?');

// asking For Confirmation
$this->confirm('Are you sure? All data will be deleted.')

// used to provide auto-completion for possible choices
$website = $this->anticipate(
	'What the domain name of the website?',
	['google.com', 'facebook.com']
);

// give the user a predefined set of choices
$website = $this->choice(
	'What the domain name of the website?', 
	['facebook.com', 'google.com', 'linked.in'], 
    $defaultIndex
 );
</code></pre>
<h3>Writing Output</h3>
<p>To send output to our console as feedback, we can use the <code>line</code>, <code>info</code>, <code>comment</code>, <code>question</code>, <code>warn</code>, and <code>error</code> methods. Each of these methods will display the output text in appropriate colors for their purpose. Expect these text output method, we are also provided with two very useful and appealing layouts <code>Table</code> and <code>Progress Bar</code>.</p>
<h4>Table Layouts</h4>
<p>The <code>table</code> method makes it easy to show tabular data. We just need to pass in the headers and rows to the method. The width and height will be dynamically calculated based on the given data:</p>
<pre><code>$this->table(['ID', 'name', 'fqdn'], $websites->toArray());
</code></pre>
<p><img src="/uploads/1_yBEtLlPMNokk8kLVIn7aKw.png" alt=""></p>
<h4>Progress Bars</h4>
<p>For iterative or long-running tasks, we could show a progress indicator as feedback to the user. Using the <code>output</code> object, we can start, advance and stop the Progress Bar. First, define the total number of steps the process will iterate through. Then, advance the Progress Bar using <code>$bar->advance();</code> after processing each item:</p>
<pre><code>$bar = $this->output->createProgressBar(count($websites));
</code></pre>
<p><img src="/uploads/1_dJ0d_PRESk3Ak7_gKMRHxg-1.png" alt=""></p>
<hr>
<h3>Output</h3>
<p>The final code looks like below:</p>
<pre><code>class DataCleaner extends Command{   
	protected $signature = ‚Äòdata:clean { ‚Äî all} {website}‚Äô;   
    protected $description = ‚ÄòClean Website Data‚Äô;    
    
    public function __construct() {     
    	parent::__construct();   
    }      
    
    public function handle(
    	WebsiteRepository $websiteRepository,
        CleanerService $cleanService   
     ){     
     	$website = $this->argument(‚Äòwebsite‚Äô);     
        $all = $this->option(‚Äòall‚Äô);          
        if ( $website ) {       
        	$websiteRepository->filterByFqdn($website);
        }
        $websites = $websiteRepository->all();
        
        $this->table(
        	['ID', 'name', 'fqdn'], 
            $websites->toArray()
		);     
		$bar = $this->output->createProgressBar(count($websites));
        
        $website->each(function ($site){
        	$cleanService->run($site->toArray());                  
            $this->info("\n".$site->fqdn.' is clean.');         
            $bar->advance();       
		});   
    }
}
</code></pre>
<p>These small changes in the interface do actually matter and help make the experience more appealing and intuitive to the user. Now, go and write a beautiful command üòÉ.</p>
<hr>
<blockquote>
<p>Great things are not done by impulse, but by a series of small things brought together.</p>
<p>‚Äî George Elliot</p>
</blockquote>
</div></div></div> <footer class="container"><div class="mx-auto max-w-6xl m-0 border-t"><div class="py-6 flex flex-wrap md:flex-no-wrap justify-between items-center">
            Copyright ¬© 2020, Sandip Shrestha. All rights reserved.
        </div></div></footer></div> <div class="bg-white fixed h-full max-w-sm nav-drawer pl-12 px-6 py-20 right-0 shadow-2xl top-0 z-10" style="width:90%" data-v-56552e09><div class="flex justify-center items-center" style="width:200px" data-v-56552e09><p class="absolute font-sans font-bold text-black uppercase" style="top:42px;left:64px" data-v-56552e09>Navigation</p> <div class="absolute close icon cursor-pointer text-black" data-v-56552e09></div> <ul data-v-56552e09><li data-v-56552e09><a href="/" title="Home" class="text-4xl font-sans uppercase font-bold py-2 block nuxt-link-active" data-v-56552e09>Home</a></li> <li data-v-56552e09><a href="/posts" title="Blog" class="text-4xl font-sans uppercase font-bold py-2 block nuxt-link-active" data-v-56552e09>Blog</a></li> <li data-v-56552e09><a href="/works" title="Work" class="text-4xl font-sans uppercase font-bold py-2 block" data-v-56552e09>Works</a></li> <li data-v-56552e09><a href="/contact" title="Contact" class="text-4xl font-sans uppercase font-bold py-2 block" data-v-56552e09>Contact</a></li></ul></div> <div class="absolute bottom-0 mb-4" data-v-56552e09><span data-v-56552e09><a target="_blank" href="https://www.facebook.com/echo.Punch" title="Facebook" data-v-56552e09>Facebook</a> |
            </span> <span data-v-56552e09><a target="_blank" href="https://twitter.com/san_inmersion" title="Twitter" data-v-56552e09>Twitter</a> |
            </span> <span data-v-56552e09><a target="_blank" href="https://github.com/saninmersion" title="Github" data-v-56552e09>Github</a> |
            </span> <span data-v-56552e09><a target="_blank" href="https://www.linkedin.com/in/sandip-shrestha" title="Linkedin" data-v-56552e09>Linkedin</a></span></div></div> <!----></div></div></div><script>window.__NUXT__={layout:"default",data:[{post:Object.create(null,{default:{writable:!0,enumerable:!0,value:{attributes:{tags:["Laravel","Console","Command","UI","UX"],title:"Crafting User-Friendly Laravel Command",subtitle:"Design your console commands for better user experience",featured_image:"/uploads/1_dJ0d_PRESk3Ak7_gKMRHxg.png",excerpt:"Design your console commands for better user experience",published_date:"2020-02-19T18:15:00.000Z",canonical_url:""},html:"<p>To create a new command, we can use the <code>make:command</code> Artisan command. This command will create a new command class in the <code>app/Console/Commands</code> directory.</p>\n<pre><code>php artisan make:command DataCleaner\n</code></pre>\n<p>Let‚Äôs take a look at the example command to clean data on a website.</p>\n<pre><code>class DataCleaner extends Command{\n\tprotected $signature = 'data:clean { ‚Äî all} {website}';   \n    protected $description = 'Clean Website Data';    \n    \n    public function __construct()   {     \n    \tparent::__construct();   \n    }      \n    \n    public function handle(\n   \t  WebsiteRepository $websiteRepository, \n      CleanerService $cleanerService\n    ){     \n    \t$website = $this-&gt;argument(‚Äòwebsite‚Äô);     \n        $all = $this-&gt;option(‚Äòall‚Äô);          \n        if ( $website ) {       \n        \t$websiteRepository-&gt;filterByFqdn($website);\n        }\n        \n         $websites = $websiteRepository-&gt;all();\n         $website-&gt;each(function ($site){       \n         \t$cleanerService-&gt;run($site-&gt;toArray());\n            }   \n         ); \n     }\n}\n</code></pre>\n<blockquote>\n<p>Note that we are able to inject any dependencies we need into the command‚Äôs handle method. We injected <code>WebsiteRepository</code> and <code>CleanerService</code> class in the handle method above.</p>\n</blockquote>\n<h3>Command Structure</h3>\n<p>The <code>signature</code> and <code>description</code> properties of the class will be used when displaying your command on the list screen.</p>\n<pre><code>protected $signature = ‚Äòdata:clean { ‚Äî all} {website}‚Äô;\n</code></pre>\n<p>The <code>signature</code> property allows you to define the name, arguments, and options for the command in a single, expressive, route-like syntax.</p>\n<p>All user-supplied <code>arguments</code> and <code>options</code> are wrapped in curly braces. In the following example, the command defines one required argument: <code>website</code>.</p>\n<p>You may also make arguments optional and define default values for arguments:</p>\n<pre><code>data:clean {website?} // Optional argument‚Ä¶\n\ndata:clean {website?=sandipshrestha.com.np} // Optional argument with default value‚Ä¶\n</code></pre>\n<p><code>Options</code> are prefixed by two hyphens ( ‚Äî ) when they are specified on the command line. There are two types of options: those that receive a value and those that don‚Äôt. Options that don‚Äôt receive a value serve as a boolean ‚Äúswitch‚Äù. In the following example, the command defines one option: <code>all</code>.</p>\n<p>The <code>handle</code> method will be called when your command is executed. We place our command logic in this method.</p>\n<h3>Retrieving Input</h3>\n<p>We can access the values for the arguments and options accepted by our command by using the argument and option methods:</p>\n<pre><code>// retrieve the website argument value...\n$website = $this-&gt;argument(‚Äòwebsite‚Äô);\n\n// retrieve all of the arguments as an array...\n$arguments = $this-&gt;arguments();\n\n// Retrieve a specific option...\n$all = $this-&gt;option('all');\n\n// Retrieve all options...\n$options = $this-&gt;options();\n</code></pre>\n<p>We can also ask the input value from users by using the following methods.</p>\n<pre><code>// prompt the user with a question\n$name = $this-&gt;ask('What the domain name of the website?');\n\n// similar to ask, but the user's input will be hidden as they type\n$password = $this-&gt;secret('What is the admin password?');\n\n// asking For Confirmation\n$this-&gt;confirm('Are you sure? All data will be deleted.')\n\n// used to provide auto-completion for possible choices\n$website = $this-&gt;anticipate(\n\t'What the domain name of the website?',\n\t['google.com', 'facebook.com']\n);\n\n// give the user a predefined set of choices\n$website = $this-&gt;choice(\n\t'What the domain name of the website?', \n\t['facebook.com', 'google.com', 'linked.in'], \n    $defaultIndex\n );\n</code></pre>\n<h3>Writing Output</h3>\n<p>To send output to our console as feedback, we can use the <code>line</code>, <code>info</code>, <code>comment</code>, <code>question</code>, <code>warn</code>, and <code>error</code> methods. Each of these methods will display the output text in appropriate colors for their purpose. Expect these text output method, we are also provided with two very useful and appealing layouts <code>Table</code> and <code>Progress Bar</code>.</p>\n<h4>Table Layouts</h4>\n<p>The <code>table</code> method makes it easy to show tabular data. We just need to pass in the headers and rows to the method. The width and height will be dynamically calculated based on the given data:</p>\n<pre><code>$this-&gt;table(['ID', 'name', 'fqdn'], $websites-&gt;toArray());\n</code></pre>\n<p><img src=\"/uploads/1_yBEtLlPMNokk8kLVIn7aKw.png\" alt=\"\"></p>\n<h4>Progress Bars</h4>\n<p>For iterative or long-running tasks, we could show a progress indicator as feedback to the user. Using the <code>output</code> object, we can start, advance and stop the Progress Bar. First, define the total number of steps the process will iterate through. Then, advance the Progress Bar using <code>$bar-&gt;advance();</code> after processing each item:</p>\n<pre><code>$bar = $this-&gt;output-&gt;createProgressBar(count($websites));\n</code></pre>\n<p><img src=\"/uploads/1_dJ0d_PRESk3Ak7_gKMRHxg-1.png\" alt=\"\"></p>\n<hr>\n<h3>Output</h3>\n<p>The final code looks like below:</p>\n<pre><code>class DataCleaner extends Command{   \n\tprotected $signature = ‚Äòdata:clean { ‚Äî all} {website}‚Äô;   \n    protected $description = ‚ÄòClean Website Data‚Äô;    \n    \n    public function __construct() {     \n    \tparent::__construct();   \n    }      \n    \n    public function handle(\n    \tWebsiteRepository $websiteRepository,\n        CleanerService $cleanService   \n     ){     \n     \t$website = $this-&gt;argument(‚Äòwebsite‚Äô);     \n        $all = $this-&gt;option(‚Äòall‚Äô);          \n        if ( $website ) {       \n        \t$websiteRepository-&gt;filterByFqdn($website);\n        }\n        $websites = $websiteRepository-&gt;all();\n        \n        $this-&gt;table(\n        \t['ID', 'name', 'fqdn'], \n            $websites-&gt;toArray()\n\t\t);     \n\t\t$bar = $this-&gt;output-&gt;createProgressBar(count($websites));\n        \n        $website-&gt;each(function ($site){\n        \t$cleanService-&gt;run($site-&gt;toArray());                  \n            $this-&gt;info(&quot;\\n&quot;.$site-&gt;fqdn.' is clean.');         \n            $bar-&gt;advance();       \n\t\t});   \n    }\n}\n</code></pre>\n<p>These small changes in the interface do actually matter and help make the experience more appealing and intuitive to the user. Now, go and write a beautiful command üòÉ.</p>\n<hr>\n<blockquote>\n<p>Great things are not done by impulse, but by a series of small things brought together.</p>\n<p>‚Äî George Elliot</p>\n</blockquote>\n"}},attributes:{writable:!0,enumerable:!0,value:{tags:["Laravel","Console","Command","UI","UX"],title:"Crafting User-Friendly Laravel Command",subtitle:"Design your console commands for better user experience",featured_image:"/uploads/1_dJ0d_PRESk3Ak7_gKMRHxg.png",excerpt:"Design your console commands for better user experience",published_date:"2020-02-19T18:15:00.000Z",canonical_url:""}},html:{writable:!0,enumerable:!0,value:"<p>To create a new command, we can use the <code>make:command</code> Artisan command. This command will create a new command class in the <code>app/Console/Commands</code> directory.</p>\n<pre><code>php artisan make:command DataCleaner\n</code></pre>\n<p>Let‚Äôs take a look at the example command to clean data on a website.</p>\n<pre><code>class DataCleaner extends Command{\n\tprotected $signature = 'data:clean { ‚Äî all} {website}';   \n    protected $description = 'Clean Website Data';    \n    \n    public function __construct()   {     \n    \tparent::__construct();   \n    }      \n    \n    public function handle(\n   \t  WebsiteRepository $websiteRepository, \n      CleanerService $cleanerService\n    ){     \n    \t$website = $this-&gt;argument(‚Äòwebsite‚Äô);     \n        $all = $this-&gt;option(‚Äòall‚Äô);          \n        if ( $website ) {       \n        \t$websiteRepository-&gt;filterByFqdn($website);\n        }\n        \n         $websites = $websiteRepository-&gt;all();\n         $website-&gt;each(function ($site){       \n         \t$cleanerService-&gt;run($site-&gt;toArray());\n            }   \n         ); \n     }\n}\n</code></pre>\n<blockquote>\n<p>Note that we are able to inject any dependencies we need into the command‚Äôs handle method. We injected <code>WebsiteRepository</code> and <code>CleanerService</code> class in the handle method above.</p>\n</blockquote>\n<h3>Command Structure</h3>\n<p>The <code>signature</code> and <code>description</code> properties of the class will be used when displaying your command on the list screen.</p>\n<pre><code>protected $signature = ‚Äòdata:clean { ‚Äî all} {website}‚Äô;\n</code></pre>\n<p>The <code>signature</code> property allows you to define the name, arguments, and options for the command in a single, expressive, route-like syntax.</p>\n<p>All user-supplied <code>arguments</code> and <code>options</code> are wrapped in curly braces. In the following example, the command defines one required argument: <code>website</code>.</p>\n<p>You may also make arguments optional and define default values for arguments:</p>\n<pre><code>data:clean {website?} // Optional argument‚Ä¶\n\ndata:clean {website?=sandipshrestha.com.np} // Optional argument with default value‚Ä¶\n</code></pre>\n<p><code>Options</code> are prefixed by two hyphens ( ‚Äî ) when they are specified on the command line. There are two types of options: those that receive a value and those that don‚Äôt. Options that don‚Äôt receive a value serve as a boolean ‚Äúswitch‚Äù. In the following example, the command defines one option: <code>all</code>.</p>\n<p>The <code>handle</code> method will be called when your command is executed. We place our command logic in this method.</p>\n<h3>Retrieving Input</h3>\n<p>We can access the values for the arguments and options accepted by our command by using the argument and option methods:</p>\n<pre><code>// retrieve the website argument value...\n$website = $this-&gt;argument(‚Äòwebsite‚Äô);\n\n// retrieve all of the arguments as an array...\n$arguments = $this-&gt;arguments();\n\n// Retrieve a specific option...\n$all = $this-&gt;option('all');\n\n// Retrieve all options...\n$options = $this-&gt;options();\n</code></pre>\n<p>We can also ask the input value from users by using the following methods.</p>\n<pre><code>// prompt the user with a question\n$name = $this-&gt;ask('What the domain name of the website?');\n\n// similar to ask, but the user's input will be hidden as they type\n$password = $this-&gt;secret('What is the admin password?');\n\n// asking For Confirmation\n$this-&gt;confirm('Are you sure? All data will be deleted.')\n\n// used to provide auto-completion for possible choices\n$website = $this-&gt;anticipate(\n\t'What the domain name of the website?',\n\t['google.com', 'facebook.com']\n);\n\n// give the user a predefined set of choices\n$website = $this-&gt;choice(\n\t'What the domain name of the website?', \n\t['facebook.com', 'google.com', 'linked.in'], \n    $defaultIndex\n );\n</code></pre>\n<h3>Writing Output</h3>\n<p>To send output to our console as feedback, we can use the <code>line</code>, <code>info</code>, <code>comment</code>, <code>question</code>, <code>warn</code>, and <code>error</code> methods. Each of these methods will display the output text in appropriate colors for their purpose. Expect these text output method, we are also provided with two very useful and appealing layouts <code>Table</code> and <code>Progress Bar</code>.</p>\n<h4>Table Layouts</h4>\n<p>The <code>table</code> method makes it easy to show tabular data. We just need to pass in the headers and rows to the method. The width and height will be dynamically calculated based on the given data:</p>\n<pre><code>$this-&gt;table(['ID', 'name', 'fqdn'], $websites-&gt;toArray());\n</code></pre>\n<p><img src=\"/uploads/1_yBEtLlPMNokk8kLVIn7aKw.png\" alt=\"\"></p>\n<h4>Progress Bars</h4>\n<p>For iterative or long-running tasks, we could show a progress indicator as feedback to the user. Using the <code>output</code> object, we can start, advance and stop the Progress Bar. First, define the total number of steps the process will iterate through. Then, advance the Progress Bar using <code>$bar-&gt;advance();</code> after processing each item:</p>\n<pre><code>$bar = $this-&gt;output-&gt;createProgressBar(count($websites));\n</code></pre>\n<p><img src=\"/uploads/1_dJ0d_PRESk3Ak7_gKMRHxg-1.png\" alt=\"\"></p>\n<hr>\n<h3>Output</h3>\n<p>The final code looks like below:</p>\n<pre><code>class DataCleaner extends Command{   \n\tprotected $signature = ‚Äòdata:clean { ‚Äî all} {website}‚Äô;   \n    protected $description = ‚ÄòClean Website Data‚Äô;    \n    \n    public function __construct() {     \n    \tparent::__construct();   \n    }      \n    \n    public function handle(\n    \tWebsiteRepository $websiteRepository,\n        CleanerService $cleanService   \n     ){     \n     \t$website = $this-&gt;argument(‚Äòwebsite‚Äô);     \n        $all = $this-&gt;option(‚Äòall‚Äô);          \n        if ( $website ) {       \n        \t$websiteRepository-&gt;filterByFqdn($website);\n        }\n        $websites = $websiteRepository-&gt;all();\n        \n        $this-&gt;table(\n        \t['ID', 'name', 'fqdn'], \n            $websites-&gt;toArray()\n\t\t);     \n\t\t$bar = $this-&gt;output-&gt;createProgressBar(count($websites));\n        \n        $website-&gt;each(function ($site){\n        \t$cleanService-&gt;run($site-&gt;toArray());                  \n            $this-&gt;info(&quot;\\n&quot;.$site-&gt;fqdn.' is clean.');         \n            $bar-&gt;advance();       \n\t\t});   \n    }\n}\n</code></pre>\n<p>These small changes in the interface do actually matter and help make the experience more appealing and intuitive to the user. Now, go and write a beautiful command üòÉ.</p>\n<hr>\n<blockquote>\n<p>Great things are not done by impulse, but by a series of small things brought together.</p>\n<p>‚Äî George Elliot</p>\n</blockquote>\n"}}),canonical:""}],fetch:[],error:null,state:{isProgressBarVisible:!0},serverRendered:!0,routePath:"/posts/crafting-user-friendly-laravel command"}</script><script src="/_nuxt/3213b8a640c84a0f40dd.js" defer></script><script src="/_nuxt/c60fc827688ff7bac84d.js" defer></script><script src="/_nuxt/ef795ee9faac29d34ba2.js" defer></script><script src="/_nuxt/286c9011147357c678b8.js" defer></script><script src="/_nuxt/b356b1a74ade292a0927.js" defer></script>
  </body>
</html>
